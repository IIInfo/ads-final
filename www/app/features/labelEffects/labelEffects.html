<section id="label-accuracy" class="col-md-12 spacer-2x spacer-2x label-full-row gray-bg" ng-if="count < total">

  <div class="col-md-12 full-row blue-bg cf">
    <div class="med-info col-md-8 col-md-offset-2 col-xs-10 col-xs-offset-1">
      <h2>Label Accuracy</h2>

      <p>Sometimes it takes a real, live person. Help us make medication labels more accurate by answering a few
        questions below. Our computers can scan key terms in labels, but they can't understand the context like a human
        can. We need your help to read the terms in the text below, and report back to us about whether that term is
        listed as a side effect.</p>
    </div>
  </div>

  <div class="row col-md-8 col-md-offset-2 col-xs-10 col-xs-offset-1 spacer" ng-hide="getPercentage() == 100">
    <div class="col-md-7 med-info">
      <h2><small>Label information for {{selectedDrug.brand_name}}</small></h2>
    </div>

    <div class="col-md-4 col-md-offset-1">
      <span><strong>{{count}}/{{total}} complete</strong></span>
      <div class="progress">
        <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="{{getPercentage()}}" aria-valuemin="0"
             aria-valuemax="100" ng-style="{width : (getPercentage() + '%')}">
        </div>
      </div>
    </div>
  </div>


  <div class="col-md-8 col-md-offset-2 col-xs-10 col-xs-offset-1 spacer">
    <div ng-show="getPercentage() == 100">
      <div class="alert alert-info alert-dismissable" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        Thanks for helping us more accurately label medicine!
      </div>
    </div>
  </div>

  <div class="row col-md-8 col-md-offset-2 col-xs-10 col-xs-offset-1" ng-repeat="stuff in displayedStuff">
    <input type="text" ng-model="stuff.effect" id="stuffGetter" style="display: none"/>

    <div class="col-md-7">
      <div ng-class="!$first?'row disabled spacer-2x':'row label-wrap'" id="adverseSentence">
        <p>{{stuff.sentence}}</p>
      </div>
    </div>

    <script>
      setTimeout(function () {
        $('#adverseSentence').highlight($('#stuffGetter')[0].value)
      }, 500);
    </script>

    <div class="col-md-4 col-md-offset-1">
      <div ng-class="!$first?'row disabled spacer-2x':'row label-wrap'">
        <div align="center">
          Is <strong>{{stuff.effect}}</strong>
          listed on the label as a side effect?<br/><br/>

          <div class="btn-group">
            <button class="btn btn-primary" ng-click="completeIndex($index, true, $first)">Yes</button>
            <button class="btn btn-danger" ng-click="completeIndex($index, false, $first)">No</button>
          </div>
        </div>
      </div>
    </div>
  </div>

</section>

<div ng-controller="LeaderBoardCtrl" ng-include src="'features/leaderBoard/leaderBoard.html'" ng-if="count >= total"></div>

