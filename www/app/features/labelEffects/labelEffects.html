<section id="label-accuracy" class="col-md-12 spacer-2x spacer-2x label-full-row gray-bg" ng-if="selectedDrug" >

  <div class="col-md-12 full-row blue-bg cf">
    <div class="med-info col-md-8 col-md-offset-2 col-xs-10 col-xs-offset-1">
      <h2>Label Accuracy</h2>

      <p>Sometimes it takes a real, live person. Help us make medication labels more accurate by answering a few
        questions below. Our computers can scan key terms in labels, but they can't understand the context like a human
        can. We need your help to read the terms in the text below, and report back to us about whether that term is
        listed as a side effect.</p>
    </div>
  </div>

  <div class="row col-md-8 col-md-offset-2 col-xs-10 col-xs-offset-1 spacer" ng-hide="getPercentage() == 100">
    <div class="col-md-7 med-info">
      <h4>Help us fix this portion of the label for: {{selectedDrug.brand_name}}</h4>
    </div>

    <div class="progress col-md-4 col-md-offset-1">
      <div class="progress-bar active" role="progressbar" aria-valuenow="{{getPercentage()}}" aria-valuemin="0"
           aria-valuemax="100" ng-style="{width : (getPercentage() + '%')}">
      </div>
              <span>{{getPercentage()}}% Complete</span>
    </div>
  </div>


  <div class="col-md-8 col-md-offset-2 col-xs-10 col-xs-offset-1 spacer">
    <div ng-show="getPercentage() == 100">
      <div class="alert alert-info alert-dismissable" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        Thanks for helping us more accurately label medicine!
      </div>
    </div>
  </div>

  <div class="row col-md-8 col-md-offset-2 col-xs-10 col-xs-offset-1" ng-repeat="stuff in displayedStuff">
    <input type="text" ng-model="stuff.effect.medical_term" id="stuffGetter" style="display: none"/>

    <div class="col-md-7">
      <div ng-class="!$first?'row disabled spacer-2x':'row label-wrap'" id="adverseSentence">
        <p>{{stuff.sentence}}</p>
      </div>
    </div>

    <script>
      setTimeout(function () {
        $('#adverseSentence').highlight($('#stuffGetter')[0].value)
      }, 500);
    </script>

    <div class="col-md-4 col-md-offset-1">
      <div ng-class="!$first?'row disabled spacer-2x':'row label-wrap confirm'">
          <p>Is <strong bs-tooltip="stuff.effect.layman_term" data-placement="top">{{stuff.effect.medical_term.toLowerCase()}}</strong>
          listed on the label as a side effect?</p>

          <div class="btn-group">
            <ul class="nav nav-pills " data-toggle="buttons">
              <li class='yes-btn' role="presentation" ng-click="completeIndex($index, true, $first)"><a href="">YES</a></li>
              <li class='no-btn' role="presentation" ng-click="completeIndex($index, false, $first)"><a href="">NO</a></li>
            </ul>

<!-- <button class="btn btn-primary" ng-click="completeIndex($index, true, $first)">Yes</button>
            <button class="btn btn-danger" ng-click="completeIndex($index, false, $first)">No</button> -->
        </div>
      </div>
    </div>
  </div>

</section>
